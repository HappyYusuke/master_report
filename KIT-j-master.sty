% english-report.sty
% Based on scl-j-master (23 Dec 01)
% Modified for English Master's Thesis

\typeout{Document Style 'scl-e-master' (English Version).}

\def\@ptsize{0} \@namedef{ds@11pt}{\def\@ptsize{1}}
\@namedef{ds@12pt}{\def\@ptsize{2}} 
\def\ds@twoside{\@twosidetrue \@mparswitchtrue}
\def\ds@draft{\overfullrule 5pt} 
\@options

% --- Page Layout (Kept original settings) ---
\parindent      1.0em

\topmargin      -1.09cm % 1 inch=2.54cm 0.46+2.54=3.0cm
\headheight     0.5cm
\headsep        1.05cm
\oddsidemargin  0.47cm  % 1 inch=2.54cm 0.46+2.54=3.0cm
\evensidemargin 0.47cm  % 1 inch=2.54cm 0.46+2.54=3.0cm
\textwidth      16.35cm % A4 width=21.0cm
\textheight     24.7cm  % A4 height=29.7cm

% --- Lists ---
\def\labelenumi{\theenumi.} 
\def\theenumi{\arabic{enumi}} 
\def\labelenumii{(\theenumii)}
\def\theenumii{\alph{enumii}}
\def\p@enumii{\theenumi}
\def\labelenumiii{\theenumiii.}
\def\theenumiii{\roman{enumiii}}
\def\p@enumiii{\theenumi(\theenumii)}
\def\labelenumiv{\theenumiv.}
\def\theenumiv{\Alph{enumiv}} 
\def\p@enumiv{\p@enumiii\theenumiii}

\def\labelitemi{$\bullet$}
\def\labelitemii{\bf --}
\def\labelitemiii{$\ast$}
\def\labelitemiv{$\cdot$}

% --- Environments ---
\def\verse{\let\\=\@centercr 
 \list{}{\itemsep\z@ \itemindent -1.5em\listparindent \itemindent 
 \rightmargin\leftmargin\advance\leftmargin 1.5em}\item[]}
\let\endverse\endlist
\def\quotation{\list{}{\listparindent 1.5em
 \itemindent\listparindent
 \rightmargin\leftmargin\parsep 0pt plus 1pt}\item[]}
\let\endquotation=\endlist
\def\quote{\list{}{\rightmargin\leftmargin}\item[]}
\let\endquote=\endlist

\def\descriptionlabel#1{\hspace\labelsep \bf #1}
\def\description{\list{}{\labelwidth\z@ \itemindent-\leftmargin
 \let\makelabel\descriptionlabel}}
\let\enddescription\endlist
\newdimen\descriptionmargin
\descriptionmargin=3em

% --- Title Page Setup ---
\def\titlepage{\@restonecolfalse\if@twocolumn\@restonecoltrue\onecolumn
 \else \newpage \fi \thispagestyle{empty}\c@page\z@}
\def\endtitlepage{\if@restonecol\twocolumn \else \newpage \fi}

\arraycolsep 5pt \tabcolsep 6pt \arrayrulewidth .4pt \doublerulesep 2pt 
\tabbingsep \labelsep 
\skip\@mpfootins = \skip\footins
\fboxsep = 3pt \fboxrule = .4pt 

% --- Sectioning ---
\def\thepart {\Roman{part}}
\def\thechapter {\arabic{chapter}}
\def\thesection {\thechapter.\arabic{section}}
\def\thesubsection {\thesection.\arabic{subsection}}
\def\thesubsubsection {\thesubsection .\arabic{subsubsection}}
\def\theparagraph {\thesubsubsection.\arabic{paragraph}}
\def\thesubparagraph {\theparagraph.\arabic{subparagraph}}

\def\part{\cleardoublepage \thispagestyle{plain} \if@twocolumn \onecolumn
\@tempswatrue \else \@tempswafalse \fi \hbox{}\vfil \secdef\@part\@spart} 

\def\@part[#1]#2{\ifnum \c@secnumdepth >-2\relax \refstepcounter{part}
\addcontentsline{toc}{part}{\thepart \hspace{1em}#1}\else
\addcontentsline{toc}{part}{#1}\fi \markboth{}{}
 {\centering \ifnum \c@secnumdepth >-2\relax \huge\bf Part \thepart \par
\vskip 20pt \fi \Huge \bf #1\par}\@endpart} 
\def\@endpart{\vfil\newpage \if@twoside \hbox{} \thispagestyle{empty} 
 \newpage 
 \fi \if@tempswa \twocolumn \fi} 
\def\@spart#1{{\centering \Huge \bf #1\par}\@endpart}

% --- Table of Contents (Modified for English) ---
\def\@pnumwidth{1.55em}
\def\@ppnumwidth{0.55em}
\def\@tocrmarg {2.55em}
\def\@dotsep{4.5}
\setcounter{tocdepth}{2}

\def\tableofcontents{%
  \if@twocolumn\@restonecoltrue\onecolumn
  \else\@restonecolfalse\fi
  \chapter*{Table of Contents} % Changed from 目次
  \@starttoc{toc}%
  \if@restonecol\twocolumn\fi}

\def\l@section{\@dottedtocline{1}{1.5em}{2.3em}}
\def\l@subsection{\@dottedtocline{2}{3.8em}{3.2em}}
\def\l@subsubsection{\@dottedtocline{3}{7.0em}{4.1em}}
\def\l@paragraph{\@dottedtocline{4}{10em}{5em}}
\def\l@subparagraph{\@dottedtocline{5}{12em}{6em}}

% --- List of Figures (Modified for English) ---
\def\listoffigures{\@restonecolfalse\if@twocolumn\@restonecoltrue\onecolumn
 \fi\chapter*{List of Figures} % Changed from 図目次
    \@starttoc{lof}\if@restonecol\twocolumn
 \fi}
\def\l@figure{\@dottedtocline{1}{1.5em}{2.3em}}

% --- List of Tables (Modified for English) ---
\def\listoftables{\@restonecolfalse\if@twocolumn\@restonecoltrue\onecolumn
 \fi\chapter*{List of Tables} % Changed from 表目次
    \@starttoc{lot}\if@restonecol
 \twocolumn\fi}
\let\l@table\l@figure

% --- Bibliography (Modified for English) ---
\def\thebibliography#1{\chapter*{References} % Changed from 参考文献
 \list
 {[\arabic{enumi}]}{\settowidth\labelwidth{[#1]}\leftmargin\labelwidth
 \advance\leftmargin\labelsep
 \usecounter{enumi}}
 \def\newblock{\hskip .11em plus .33em minus .07em}
 \sloppy
 \sfcode`\.=1000\relax}
\let\endthebibliography=\endlist

% --- Index (Modified for English) ---
\newif\if@restonecol
\def\theindex{\@restonecoltrue\if@twocolumn\@restonecolfalse\fi
\columnseprule \z@
\columnsep 35pt\twocolumn[\@makeschapterhead{Index}] % Changed from 索引
 \@mkboth{Index}{Index}\thispagestyle{plain}\parindent\z@
 \parskip\z@ plus .3pt\relax\let\item\@idxitem}
\def\@idxitem{\par\hangindent 40pt}
\def\subitem{\par\hangindent 40pt \hspace*{20pt}}
\def\subsubitem{\par\hangindent 40pt \hspace*{30pt}}
\def\endtheindex{\if@restonecol\onecolumn\else\clearpage\fi}
\def\indexspace{\par \vskip 10pt plus 5pt minus 3pt\relax}

% --- Footnotes ---
\def\footnoterule{\kern-3\p@ 
 \hrule width .4\columnwidth 
 \kern 2.6\p@} 
\@addtoreset{footnote}{chapter} 
\long\def\@makefntext#1{\parindent 1em\noindent 
 \hbox to 1.8em{\hss$^{\@thefnmark}$}#1}

% --- Floats (Captions) ---
\setcounter{topnumber}{2}
\def\topfraction{.7}
\setcounter{bottomnumber}{1}
\def\bottomfraction{.3}
\setcounter{totalnumber}{3}
\def\textfraction{.2}
\def\floatpagefraction{.5}
\setcounter{dbltopnumber}{2}
\def\dbltopfraction{.7}
\def\dblfloatpagefraction{.5}

\long\def\@makecaption#1#2{
 \vskip 10pt 
 \setbox\@tempboxa\hbox{#1: #2}
 \ifdim \wd\@tempboxa >\hsize \unhbox\@tempboxa\par \else \hbox
to\hsize{\hfil\box\@tempboxa\hfil} 
 \fi}

%\newcounter{figure}[chapter]
\def\thefigure{\thechapter.\@arabic\c@figure}
\def\fps@figure{tbp}
\def\ftype@figure{1}
\def\ext@figure{lof}
\def\fnum@figure{Fig. \thefigure}
\def\figure{\@float{figure}}
\let\endfigure\end@float
\@namedef{figure*}{\@dblfloat{figure}}
\@namedef{endfigure*}{\end@dblfloat}

%\newcounter{table}[chapter]
\def\thetable{\thechapter.\@arabic\c@table}
\def\fps@table{tbp}
\def\ftype@table{2}
\def\ext@table{lot}
\def\fnum@table{Table \thetable}
\def\table{\@float{table}}
\let\endtable\end@float
\@namedef{table*}{\@dblfloat{table}}
\@namedef{endtable*}{\end@dblfloat}

% --- Title Page Generation ---
%\input titlepage.sty

\newlength{\titletopskip}
\setlength{\titletopskip}{4.0cm}

\def\maketitle{\begin{titlepage} 
%\let\footnotesize\small
\let\footnoterule\relax \setcounter{page}{0}
\null
% \vskip \titletopskip % \vfil
\vskip 30pt 
\begin{center}
{\Large Master's Thesis} \par
\vskip 40pt
{\Large\bf \@title \par}
\vskip 40pt
Supervisor: Professor {\large \@adviser}  \par

\end{center} \par
\@thanks
\vfil
\vfil
\vfil
\vfil
\begin{center}
\scalebox{0.5}{\includegraphics{KIT_kosho.eps}} \par
{\@school} \par 
{\@major \@course} \par
\vskip 20pt
{\Large \@author} \par
\vskip 20pt
{\@date} \par
\end{center}
{
 \renewcommand{\thefootnote}{}
 \footnote{Copyright \copyright\ \number\year\ by \@eauthor}
}
\null
\end{titlepage}

\setcounter{footnote}{0} \let\thanks\relax
\gdef\@thanks{}\gdef\@author{}\gdef\@title{}\let\maketitle\relax} 

% --- Abstract (Modified for English) ---
\def\abstract{\titlepage
\null\vfil
\begin{center}
{\bf \abstractname}
\end{center}}
\def\endabstract{\par\vfil\null\endtitlepage}

\def\school#1{\def\@school{#1}}
\def\major#1{\def\@major{#1}}
\def\course#1{\def\@course{#1}}
\def\adviser#1{\def\@adviser{#1}}
\def\subadviser#1{\def\@subadviser{#1}}
\def\eauthor#1{\def\@eauthor{#1}}

\def\crnotify#1{\def\@crnotify{#1}}
\crnotify{}

% --- Headers ---
\mark{{}{}} 

\if@twoside 
 \def\ps@headings{\let\@mkboth\markboth
 \def\@oddfoot{}
 \def\@evenfoot{}
 \def\@evenhead{\rm \thepage\hfil \sl \leftmark}
 \def\@oddhead{\hbox{}\sl \rightmark \hfil \rm\thepage}
 \def\chaptermark##1{\markboth%
   {\uppercase%
   {\ifnum \c@secnumdepth >\m@ne
      Chapter\ \thechapter\ \fi ##1}}{}
   }
 \def\sectionmark##1{\markright
  {\uppercase{\ifnum \c@secnumdepth >\z@
  \thesection. \ \fi ##1}}}}
\else 
 \def\ps@headings{\let\@mkboth\markboth
 \def\@oddfoot{}
 \def\@evenfoot{}
 \def\@oddhead{\hbox {}\sl \rightmark \hfil \rm\thepage}
 \def\@evenhead{\rm \thepage\hfil\sl\leftmark\hbox{}}
 \def\chaptermark##1{\markright%
 {\uppercase%
 {\ifnum \c@secnumdepth >\m@ne
    \ifnum \@chapternumber > 0  
       Chapter\ \thechapter\ 
    \fi
  \fi
   ##1}}}
}
\fi

\def\ps@myheadings{\let\@mkboth\@gobbletwo
\def\@oddhead{\hbox{}\sl\rightmark \hfil \rm\thepage}
\def\@oddfoot{}
\def\@evenhead{\rm \thepage\hfil\sl\leftmark\hbox{}}
\def\@evenfoot{}\def\chaptermark##1{}%
\def\sectionmark##1{}\def\subsectionmark##1{}}

% --- Date Settings (Modified for English) ---
% Replaced complex Japanese calendar logic with standard English date format
\def\today{\ifcase\month\or
  January\or February\or March\or April\or May\or June\or
  July\or August\or September\or October\or November\or December\fi
  \space\number\day, \number\year}

\@addtoreset{equation}{chapter} 
\def\theequation{\thechapter.\arabic{equation}}

% --- Layout Adjustments ---
\ps@plain \pagenumbering{arabic} \onecolumn \if@twoside\else\raggedbottom\fi 
%
% Line Spacing
%
\renewcommand{\baselinestretch}{1.3}
%
% Names (Modified for English)
%
\def\abstractname{Abstract}
\def\eabstractname{Abstract}
%
% Publication List (Modified for English)
\newenvironment{publication}%
{\chapter*{Publications Related to This Study}\newcounter{pubnum}\begin{list}%
{[\arabic{pubnum}]}{\usecounter{pubnum}}}{\end{list}}

%
% Header Page Number Style
%
\pagestyle{headings}
%\pagestyle{headnombre}

\def\chapter{%
  \if@openright\cleardoublepage\else\clearpage\fi
%  \thispagestyle{empty}%  
%  \thispagestyle{jpl@in}% 
  \global\@topnum\z@
  \@afterindentfalse
  \secdef\@chapter\@schapter}
\def\@chapter[#1]#2{%
  \def\@chapternumber{1}   
  \ifnum \c@secnumdepth >\m@ne
    \refstepcounter{chapter}%
    \typeout{\@chapapp\space\thechapter\space\@chappos}%
    % 目次の「第・章」を「Chapter」に変更する設定
    \def\@chapapp{Chapter\ } % 前につく文字（スペース含む）
    \def\@chappos{}          % 後ろにつく文字（なし）
    \addcontentsline{toc}{chapter}%
      {\protect\numberline{\@chapapp\thechapter\@chappos}#1}%%%
  \else
    \addcontentsline{toc}{chapter}{#1}%
  \fi
  \chaptermark{#1}%
  \addtocontents{lof}{\protect\addvspace{10\p@}}%
  \addtocontents{lot}{\protect\addvspace{10\p@}}%
  \@makechapterhead{#2}\@afterheading}

\def\@makechapterhead#1{ \vspace*{50pt}%
  { \parindent 0pt \raggedright 
    \ifnum \c@secnumdepth >\m@ne 
      \huge\bf Chapter{} \thechapter\ \par
        \vskip 20pt 
    \fi
        \Huge \bf #1\par 
    \nobreak \vskip 40pt } }

\def\@schapter#1{%
  \def\@chapternumber{0}
  \ifnum \thechapter > 0  
  \ifnum \c@secnumdepth >\m@ne
    \addcontentsline{toc}{chapter}{#1}% 
%      {\protect\numberline{}#1}% 
%  \else
%    \addcontentsline{toc}{chapter}{#1}%
  \fi
  \fi
  \chaptermark{#1}%
  \addtocontents{lof}{\protect\addvspace{10\p@}}%
  \addtocontents{lot}{\protect\addvspace{10\p@}}%
  \@makeschapterhead{#1}\@afterheading
}
\def\@makeschapterhead#1{\hbox{}%
  \vskip2\Cvs
  {\parindent\z@
   \raggedright
   \reset@font\huge\bfseries
   \setlength\@tempdima{\linewidth}%
   \vtop{\hsize\@tempdima#1}}\vskip3\Cvs}